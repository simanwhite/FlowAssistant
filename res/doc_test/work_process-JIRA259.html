<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>work_process-JIRA259</title>
        <link type="text/css" rel="stylesheet" href="appbase.css">
    </head>
    <body class="wikidpad">
<span class="wikidpad parent-nodes">parent nodes: <span class="wikidpad parent-node"><a href="calendar_Augst_2016.html" class="wikidpad">calendar_Augst_2016</a></span> | <span class="wikidpad parent-node"><a href="work%20projects.html" class="wikidpad">work projects</a></span><br class="wikidpad" /><br class="wikidpad" /></span>
<a name=".h0" class="wikidpad"></a><h2 class="wikidpad heading-level2">work_process-JIRA259</h2>
<hr class="wikidpad" />
标题: Power flow delivery to JV<br class="wikidpad" />
JIRA地址: <span class="wikidpad url-link"><a href="http://ontrack-internal.amd.com/browse/DMVMTVRF-259" class="wikidpad">http://ontrack-internal.amd.com/browse/DMVMTVRF-259</a></span><br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<a name=".h198" class="wikidpad"></a><h3 class="wikidpad heading-level3">状态及下一步(newest on top)</h3>
<hr class="wikidpad" />
<ol class="wikidpad orderedlist">
<li class="wikidpad" /><br class="wikidpad" />
<br class="wikidpad" />
</ol>
<a name=".h311" class="wikidpad"></a><h3 class="wikidpad heading-level3">环境及问题描述</h3>
<hr class="wikidpad" />
<b class="wikidpad">环境</b>:<br class="wikidpad" />
atlvgar05:8/amd123 for viewing the logs.<br class="wikidpad" />
/proj/vmt_mukti_qual/skanagal/mukti587376<br class="wikidpad" />
<br class="wikidpad" />
bdji -c -e 'run_test "soc_sanity mp0_boot_nlp "' -J lsf -m8 -l zp_nlp.log -s DEB<br class="wikidpad" />
UG -v5 -DREAM_MP0<br class="wikidpad" />
<br class="wikidpad" />
vnc: atlvgar05:8/amd123<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<b class="wikidpad">问题描述</b>:<pre class="wikidpad">Executed the following commands.

1.	atlvgar09:/proj/vmt_mukti_qual/skanagal/mukti587376[ 97 ] --&gt; 

bdji -c -e 'run_test "soc_sanity mp0_boot_nlp "' -J lsf -m8 -l zp_nlp.log -s DEB
UG -v5 -DREAM_MP0

Please find the following Error from the file /proj/vmt_mukti_qual/skanagal/mukti587376/out/linux_2.6.18_64.VCS/mt/config/mt_full_chip_nlp/pub/sim/vcs_compile.log

Error-[UPF_ONF] Object not found  # 有对象没定义
/proj/vmt_mukti_qual/skanagal/mukti587376/src/verif/archpro_verif/upf/mpu/audio_az_t.upf, 209
  Element 
  'sys/pkg00/mpu00/audio_az_t/az_s5_wrapper/U_audio_az_io/uPAD_AUDIO_AZ_BCLK/VDD18_GPIO'
  does not exist in the design.
  Please specify a valid design object.


Error-[UPF_UDSP] Undefined Supply Port
/proj/vmt_mukti_qual/skanagal/mukti587376/src/verif/archpro_verif/upf/mpu/audio_az_t.upf, 209
  Supply port 
  'sys/pkg00/mpu00/audio_az_t/az_s5_wrapper/U_audio_az_io/uPAD_AUDIO_AZ_BCLK/VDD18_GPIO'
  specified with 'connect_supply_net' is not defined.
  Please ensure that the supply port is defined before being used.

Power Intent parsing failed
Power Intent parsing failed
Power Intent parsing failed
Power Intent parsing failed
Power Intent Top Scope:

2.	atlvgar09:/proj/vmt_mukti_qual/skanagal/mukticl626570[ 133 ] --&gt; 

dj -c -e 'buildflow::simulator(:mt_upfg_sram).build' -l run_test1.log -J lsf -m 
8 --save_cmd_log

echo cp SYS.upf.2.0 SYS.upf
cp SYS.upf.2.0 SYS.upf
cp SYS.upf.2.0 SYS.upf
cp: cannot stat 'SYS.upf.2.0': No such file or directory
if ( 126 != 0 || -e .dfp_fail ) then
echo SYS upf 2.0 generation FAILED
SYS upf 2.0 generation FAILED
echo Please look at /proj/vmt_mukti_qual/skanagal/mukticl626570/out/linux_2.6.18_64.VCS/mt/config/mt_upfg_sram/pub/sim/chip.upf.log for more details
Please look at /proj/vmt_mukti_qual/skanagal/mukticl626570/out/linux_2.6.18_64.VCS/mt/config/mt_upfg_sram/pub/sim/chip.upf.log for more details
rm -rf from_upf_param_flow.compfiles.xf
rm -rf gen_upf
exit 1
ERROR found during do mutator upf_param_flow ...
distmake: *** [gen_upf] Error 1
build: ERROR: Command failed:

File /proj/vmt_mukti_qual/skanagal/mukticl626570/out/linux_2.6.18_64.VCS/mt/config/mt_upfg_sram/pub/sim/chip.upf.log is not present.

Thanks,
Swetha.
</pre>
<a name=".h2830" class="wikidpad"></a><h3 class="wikidpad heading-level3">日志(oldest on top)</h3>
<hr class="wikidpad" />
<a name=".h2933" class="wikidpad"></a><h4 class="wikidpad heading-level4">2016-8-11</h4>
nlp报有element并不存在. Vincent建议是不是nlp用户配置问题<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<a name=".h2990" class="wikidpad"></a><h4 class="wikidpad heading-level4">2016-8-15</h4>
atlvgar05:8/amd123 for viewing the logs. 这个vnc竟然不能用了...<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<a name=".h3064" class="wikidpad"></a><h4 class="wikidpad heading-level4">2016-8-16</h4>
错误是vcs compile时, 发现upf中的对象在design中没有定义<br class="wikidpad" />
<br class="wikidpad" />
Error-[UPF_ONF] Object not found  # 有对象没定义<br class="wikidpad" />
/proj/vmt_mukti_qual/skanagal/mukti587376/src/verif/archpro_verif/upf/mpu/audio_<br class="wikidpad" />
az_t.upf, 209 Element <br class="wikidpad" />
'sys/pkg00/mpu00/audio_az_t/az_s5_wrapper/U_audio_az_io/uPAD_AUDIO_AZ_BCLK/VDD18<br class="wikidpad" />
_GPIO' does not exist in the design. Please specify a valid design object.<br class="wikidpad" />
<br class="wikidpad" />
同时audio_az_t.upf中也有Error:<ul class="wikidpad normalindent">#VDCI template Error: VI_VB_ISO_CONTROL and VI_VD_ISO_CONTROL must be set<br class="wikidpad" />
</ul>
要搞清楚的几件事:<ol class="wikidpad orderedlist">
<li class="wikidpad" />VI_VB_ISO_CONTROL and VI_VD_ISO_CONTROL在哪里设?
<li class="wikidpad" />design跟upf不符的原因<br class="wikidpad" />
</ol>
VI_VB_ISO_CONTROL and VI_VD_ISO_CONTROL在用户给的<tile>.param里设.<br class="wikidpad" />
因为upf是直接拿来跟vcs的, 所以build.log里没有upf的生成过程. 但是这个upf和design是<br class="wikidpad" />
不符合的. <br class="wikidpad" />
<br class="wikidpad" />
第二个问题是权限问题, 虽然link有权限, 但是是假的, 对本体没有可执行权限. <br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<a name=".h3775" class="wikidpad"></a><h4 class="wikidpad heading-level4">2016-8-24</h4>
Swetha新的报错. <br class="wikidpad" />
<br class="wikidpad" />
Hi Angela/Zuo,<br class="wikidpad" />
Executed the command bdji -c -v -e 'run_test "soc_sanity/ZP_UPFG_SRAM"' -l test_zp_upfg_sram.log --save_cmd_logs -m 8 -J lsf -s DEBUG.<br class="wikidpad" />
/proj/vmt_mukti_qual/skanagal/zeppelin598130 is the workspace.<br class="wikidpad" />
There are some errors in the tile log files. Please check and update on how to proceed further validation.<br class="wikidpad" />
Thanks,<br class="wikidpad" />
Swetha.<br class="wikidpad" />
<br class="wikidpad" />
现象:<ul class="wikidpad normalindent">生成的upf都不太对. <br class="wikidpad" />
</ul>
发现:<ul class="wikidpad normalindent">38.1.23_mukti系列下面, src/template里竟然没有nlp_vdci.upf.tmpl<br class="wikidpad" />
38.1系列似乎都没有这个tmpl文件.<br class="wikidpad" />
<br class="wikidpad" />
</ul>
<a name=".h4244" class="wikidpad"></a><h4 class="wikidpad heading-level4">2016-8-26</h4>
Swetha说用38.1.23在zepline上跑是好的, 但是用38.1.23_mukti_d5跑是不好的<br class="wikidpad" />
/proj/vmt_mukti_qual/skanagal/zeppelin598130/out.bkp -&gt; 38.1.23<br class="wikidpad" />
/proj/vmt_mukti_qual/skanagal/zeppelin598130/out -&gt; 38.1.23_mukti_d5<br class="wikidpad" />
<br class="wikidpad" />
比较下来, 两个版本唯一的不同就是mukti版本在每个文件开头都加了copyright的信息<br class="wikidpad" />
<br class="wikidpad" />
Xeperl在处理template的时候, 会把第一行的 #!和eval开头的行当perl处理. 所以template<br class="wikidpad" />
里面加的copyright信息不能放在第一行<br class="wikidpad" />
<br class="wikidpad" />
Edit the following 13 files in 38.1.23_mukti_d5, to move the first copyright line under 'eval' line:<br class="wikidpad" />
Number: 1, 38.1.23_mukti_d5srcbinadd_std_lib.pl<br class="wikidpad" />
Number: 2, 38.1.23_mukti_d5srctemplatebaco_tile.upf.tmpl<br class="wikidpad" />
Number: 3, 38.1.23_mukti_d5srctemplatechip.upf.tmpl<br class="wikidpad" />
Number: 4, 38.1.23_mukti_d5srctemplatechip.upf.tmpl.new<br class="wikidpad" />
Number: 5, 38.1.23_mukti_d5srctemplateguts_parser.tmpl<br class="wikidpad" />
Number: 6, 38.1.23_mukti_d5srctemplatepower.tmpl<br class="wikidpad" />
Number: 7, 38.1.23_mukti_d5srctemplatesram.tmpl<br class="wikidpad" />
Number: 8, 38.1.23_mukti_d5srctemplatetop.params.tmpl<br class="wikidpad" />
Number: 9, 38.1.23_mukti_d5srctemplatetop_pgvi.upf.tmpl<br class="wikidpad" />
Number: 10, 38.1.23_mukti_d5srctemplatevdci_power.tmpl<br class="wikidpad" />
Number: 11, 38.1.23_mukti_d5srctemplatevdci_tile.upf.tmpl<br class="wikidpad" />
Number: 12, 38.1.23_mukti_d5srctemplatevdci_tile_power.tmpl<br class="wikidpad" />
Number: 13, 38.1.23_mukti_d5srctemplatevmemhier.template<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<a name=".h5427" class="wikidpad"></a><h4 class="wikidpad heading-level4">2016-8-29</h4>
使用新的mukt_d5版本还是有问题, tile upf生成都fail了, Xeperl会报一个错误:<ul class="wikidpad normalindent">[Xeperl] Error:  Couldn't find include [nlp_vdci.upf.tmpl]<br class="wikidpad" />
</ul>
38.1.23版本确实没有这个文件: nlp_vdci.upf.tmpl<br class="wikidpad" />
这个文件应该是38.1.27正式发布时才进去的. <br class="wikidpad" />
<br class="wikidpad" />
那它是怎么被调用的呢?<br class="wikidpad" />
genVdciTileUpf.csh -&gt; vdci_tile_power.tmpl -&gt; VDCI_BLK_TMPL<br class="wikidpad" />
VDCI_BLK_TMPL在power.param中被定义为vdci_tile.upf.tmpl<br class="wikidpad" />
vdci_tile.upf.tmpl中会#include nlp_vdci.upf.tmpl, 但是这个文件并不存在.<br class="wikidpad" />
<br class="wikidpad" />
问题:<br class="wikidpad" />
单独调vsi_shell -file vsi.tcl -output_log_file vsi.log -full64, 最后卡在<br class="wikidpad" />
Invoking Simon...这里, 几分钟后报:<ul class="wikidpad normalindent">Ctrl-C received, hit Ctrl-C again to interrupt background tasks...</ul>
Terminated<br class="wikidpad" />
<br class="wikidpad" />
所以退出状态不为0, 造成最终报错.<br class="wikidpad" />
<br class="wikidpad" />
vcs版本为2014.03-VSILP_Full64<br class="wikidpad" />
<br class="wikidpad" />
tile的upf中有报错: <br class="wikidpad" />
#VDCI template Error: VI_VB_ISO_CONTROL and VI_VD_ISO_CONTROL must be set<br class="wikidpad" />
出自vdci_tile.upf.tmpl<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<br class="wikidpad" />
<hr class="wikidpad" />
<hr class="wikidpad" />
<br class="wikidpad" />
<span class="wikidpad property attribute">[tags: mukti]</span><br class="wikidpad" />
    </body>
</html>
