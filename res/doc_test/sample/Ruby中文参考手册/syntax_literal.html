<?xml version="1.0" encoding="gb2312"?>
<html lang="gb2312" xml:lang="gb2312">
<head>
<meta http-equiv="Content-type" content="text/html; charset=gb2312" />
<meta http-equiv="Content-Style-Type" content="text/css" />

<title>Ruby参考手册 - 字面值</title>
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
<div class="navi">
<a id="header-navi" name="head-navi"></a>
<span class="navi">[<a href="../index.html">Ruby首页</a>]</span>
<span class="navi">[<a href="./index.html">参考手册</a>]</span>
</div>


<div class="body"><h1><a name="a.a5.ea.a5.c6.a5.e9.a5.eb" id="a.a5.ea.a5.c6.a5.e9.a5.eb">字面值</a><!-- RDLabel: "字面值" --></h1>
<ul>
<li><a href="#a.bf.f4.c3.cd.a5.ea.a5.c6.a5.e9.a5.eb" title="字面值 (292d)" class="modified-year">数值字面值</a></li>
<li><a href="#a.ca.b8.bb.fa.ce.f3.a5.ea.a5.c6.a5.e9.a5.eb" title="字面值 (292d)" class="modified-year">字符串字面值</a>
<ul>
<li><a href="#a.a5.d0.a5.c3.a5.af.a5.b9.a5.e9.a5.c3.a5.b7.a5.e5.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">反斜线表示法</a></li>
<li><a href="#a.bc.b0.c5.b8.b3.ab" title="字面值 (292d)" class="modified-year">展开式</a></li>
</ul></li>
<li><a href="#a.a5.b3.a5.de.a5.f3.a5.c9.bd.d0.ce.cf" title="字面值 (292d)" class="modified-year">命令输出</a></li>
<li><a href="#a.a5.d2.a5.a2.a5.c9.a5.ad.a5.e5.a5.e1.a5.f3.a5.c8.20.28.b9.d4.bb.d8.b8.fe.ca.b8.bb.fa.ce.f3.a5.ea.a5.c6.a5.e9.a5.eb.29" title="字面值 (292d)" class="modified-year">集成字符串(here document)</a></li>
<li><a href="#a.c0.b5.b5.ac.c9.bd.b8.bd.a5.ea.a5.c6.a5.e9.a5.eb" title="字面值 (292d)" class="modified-year">正则表达式字面值</a></li>
<li><a href="#a.c7.db.ce.f3.bc.b0" title="字面值 (292d)" class="modified-year">数组表达式</a></li>
<li><a href="#a.a5.cf.a5.c3.a5.b7.a5.e5.bc.b0" title="字面值 (292d)" class="modified-year">哈希表表达式</a></li>
<li><a href="#a.c8.cf.b0.cf.a5.aa.a5.d6.a5.b8.a5.a7.a5.af.a5.c8" title="字面值 (292d)" class="modified-year">范围对象</a></li>
<li><a href="#a.a5.b7.a5.f3.a5.dc.a5.eb" title="字面值 (292d)" class="modified-year">符号</a></li>
<li><a href="#a.25.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">%表示法</a></li>
</ul>
<p>我们把形如数字1或字符串“hello world”这样可以直接写入Ruby程序中的值叫做<b>字面值</b>。</p>
<h2><a name="a.bf.f4.c3.cd.a5.ea.a5.c6.a5.e9.a5.eb" id="a.bf.f4.c3.cd.a5.ea.a5.c6.a5.e9.a5.eb">数值字面值</a><!-- RDLabel: "数值字面值" --></h2>
<dl>
<dt><a name="a123" id="a123"><code>123</code></a><!-- RDLabel: "123" --></dt>
<dt><code>0d123</code>           <font color=blue>ruby 1.7 特性</font></dt>
<dd>
<p>整数</p>
</dd>
<dt><a name="a-123" id="a-123"><code>-123</code></a><!-- RDLabel: "-123" --></dt>
<dd>
<p>有符号整数 <font color=blue>trap::Numeric</font></p>
</dd>
<dt><a name="a123.2e45" id="a123.2e45"><code>123.45</code></a><!-- RDLabel: "123.45" --></dt>
<dd>
<p>浮点数
<font color=blue>ruby 1.8 特性</font>: 不能把0.1写成".1"，而只能完整地写为0.1。</p>
</dd>
<dt><a name="a1.2e2e-3" id="a1.2e2e-3"><code>1.2e-3</code></a><!-- RDLabel: "1.2e-3" --></dt>
<dd>
<p>浮点数</p>
</dd>
<dt><a name="a0xffff" id="a0xffff"><code>0xffff</code></a><!-- RDLabel: "0xffff" --></dt>
<dd>
<p>16进制整数</p>
</dd>
<dt><a name="a0b1011" id="a0b1011"><code>0b1011</code></a><!-- RDLabel: "0b1011" --></dt>
<dd>
<p>2进制整数</p>
</dd>
<dt><a name="a0377" id="a0377"><code>0377</code></a><!-- RDLabel: "0377" --></dt>
<dt><code>0o377</code>           <font color=blue>ruby 1.7 特性</font><!-- RDLabel: "0o377           ruby 1.7 特性" --></dt>
<dd>
<p>8进制整数</p>
</dd>
<dt><a name="a.3fa" id="a.3fa"><code>?a</code></a><!-- RDLabel: "?a" --></dt>
<dd>
<p>字符<code>a</code>的代码(97)</p>
<p><font color=blue>ruby 1.7 特性</font>: 用在空白类字符上时，必须写成这样，?\s、?\t等。</p>
</dd>
<dt><a name="a.3f.5cC-a" id="a.3f.5cC-a"><code>?\C-a</code></a><!-- RDLabel: "?\C-a" --></dt>
<dd>
<p>Control a 的代码(1)</p>
</dd>
<dt><a name="a.3f.5cM-a" id="a.3f.5cM-a"><code>?\M-a</code></a><!-- RDLabel: "?\M-a" --></dt>
<dd>
<p>Meta a 的代码(225)</p>
</dd>
<dt><a name="a.3f.5cM-.5cC-a" id="a.3f.5cM-.5cC-a"><code>?\M-\C-a</code></a><!-- RDLabel: "?\M-\C-a" --></dt>
<dd>
<p>Meta-Control a 的代码(129)</p>
</dd>
</dl>
<p>在<code>?</code>句中，所有的<a href="#a.a5.d0.a5.c3.a5.af.a5.b9.a5.e9.a5.c3.a5.b7.a5.e5.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">反斜线表示法</a>都是有效的。</p>
<p>您可以在除了字符代码以外的数值字面值中插入“_”。Ruby解释器会忽视“_”而不作处理。当数值位数非常多时，使用“_”会让您快速看清其位数。但是不能在字面值的前面或后面插入“_”(若在字面值前面(包括(+,-)号与字面值间的位置)插入_时，它会被误认成局部变量或方法调用)。</p>
<pre>
1_000_000_000  =&gt; 1000000000
0xffff_ffff  =&gt; 0xffffffff
</pre>

<h2><a name="a.ca.b8.bb.fa.ce.f3.a5.ea.a5.c6.a5.e9.a5.eb" id="a.ca.b8.bb.fa.ce.f3.a5.ea.a5.c6.a5.e9.a5.eb">字符串字面值</a><!-- RDLabel: "字符串字面值" --></h2>
<p>例:</p>
<pre>
"this is a string expression\n"
'this is a string expression\n'
%q!I said, "You said, 'She said it.'"!
%!I said, "You said, 'She said it.'"!
%Q('This is it.'\n)
</pre>

<p>字符串被双引号或单引号包围着。在被双引号中括起来的字符串中，<a href="#a.a5.d0.a5.c3.a5.af.a5.b9.a5.e9.a5.c3.a5.b7.a5.e5.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">反斜线表示法</a>和<a href="#a.bc.b0.c5.b8.b3.ab" title="字面值 (292d)" class="modified-year">展开式</a>(后面详述)都是有效的。在被单引号括起来的字符串中，除了\\(反斜线本身)、\'(单引号)和行尾的\(忽略换行)以外，不会对字符串内容作任何处理。</p>
<p>中间留有空白的字符串在编译时会被当作1个字符串字面值来处理。</p>
<pre>
p "foo" "bar"
=&gt; "foobar"
</pre>

<p>还有其他一些使用<a href="#a.25.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">%表示法</a>的字符串项目。</p>
<p>每次对字符串表达式进行计算时都会生成新的字符串对象。</p>
<h3><a name="a.a5.d0.a5.c3.a5.af.a5.b9.a5.e9.a5.c3.a5.b7.a5.e5.b5.ad.cb.a1" id="a.a5.d0.a5.c3.a5.af.a5.b9.a5.e9.a5.c3.a5.b7.a5.e5.b5.ad.cb.a1">反斜线表示法</a><!-- RDLabel: "反斜线表示法" --></h3>

<dl>
<dt><a name="a.5ct" id="a.5ct"><code>\t</code></a><!-- RDLabel: "\t" --></dt>
<dd>
<p>Tab(0x09)</p>
</dd>
<dt><a name="a.5cn" id="a.5cn"><code>\n</code></a><!-- RDLabel: "\n" --></dt>
<dd>
<p>换行(0x0a)</p>
</dd>
<dt><a name="a.5cr" id="a.5cr"><code>\r</code></a><!-- RDLabel: "\r" --></dt>
<dd>
<p>回车(0x0d)</p>
</dd>
<dt><a name="a.5cf" id="a.5cf"><code>\f</code></a><!-- RDLabel: "\f" --></dt>
<dd>
<p>换页(0x0c)</p>
</dd>
<dt><a name="a.5cb" id="a.5cb"><code>\b</code></a><!-- RDLabel: "\b" --></dt>
<dd>
<p>BackSpace(0x08)</p>
</dd>
<dt><a name="a.5ca" id="a.5ca"><code>\a</code></a><!-- RDLabel: "\a" --></dt>
<dd>
<p>Bell (0x07)</p>
</dd>
<dt><a name="a.5ce" id="a.5ce"><code>\e</code></a><!-- RDLabel: "\e" --></dt>
<dd>
<p>Escape(0x1b)</p>
</dd>
<dt><a name="a.5cs" id="a.5cs"><code>\s</code></a><!-- RDLabel: "\s" --></dt>
<dd>
<p>空白(0x20)</p>
</dd>
<dt><a name="a.5cnnn" id="a.5cnnn"><code>\nnn</code></a><!-- RDLabel: "\nnn" --></dt>
<dd>
<p>8 进制数表示 (n 为 0-7)</p>
</dd>
<dt><a name="a.5cxnn" id="a.5cxnn"><code>\xnn</code></a><!-- RDLabel: "\xnn" --></dt>
<dd>
<p>16 进制数表示 (n 为 0-9,a-f)</p>
</dd>
<dt><a name="a.5ccx" id="a.5ccx"><code>\cx</code></a><!-- RDLabel: "\cx" --></dt>
<dt><a name="a.5cC-x" id="a.5cC-x"><code>\C-x</code></a><!-- RDLabel: "\C-x" --></dt>
<dd>
<p>Control字符 (x 为 ASCII 字符)</p>
</dd>
<dt><a name="a.5cM-x" id="a.5cM-x"><code>\M-x</code></a><!-- RDLabel: "\M-x" --></dt>
<dd>
<p>Meta x (c | 0x80)</p>
</dd>
<dt><a name="a.5cM-.5cC-x" id="a.5cM-.5cC-x"><code>\M-\C-x</code></a><!-- RDLabel: "\M-\C-x" --></dt>
<dd>
<p>Meta Control x</p>
</dd>
<dt><a name="a.5cx" id="a.5cx"><code>\x</code></a><!-- RDLabel: "\x" --></dt>
<dd>
<p>字符 x 本身</p>
</dd>
</dl>
<h3><a name="a.bc.b0.c5.b8.b3.ab" id="a.bc.b0.c5.b8.b3.ab">展开式</a><!-- RDLabel: "展开式" --></h3>
<p>例:</p>
<pre>
(假设$ruby = "RUBY")

   "my name is #{$ruby}" #=&gt; "my name is RUBY"
   'my name is #{$ruby}' #=&gt; "my name is #{$ruby}"
</pre>

<p>在以双引号(<code>"</code>)括起来的字符串表达式、命令字符串以及正则表达式中，可以使用“#{表达式}”把表达式的内容(以字符串的形式)嵌入其中。若表达式是以($,@)开始的变量的话，则可以省略{}部分，只使用“#变量名”的形式即可。如果在字符#后出现的是“{,$,@”以外的其他字符的话，字符#仍代表"#"本身。若想显式地阻止展开式的话，在#前添加反斜线即可。</p>
<p>展开式中可以包括双引号和其他的Ruby表达式。注释也可以纳入其中。</p>
<pre>
p "#{ "string" # comment }"   # =&gt; "string"
</pre>

<p><font color=blue>ruby 1.7 特性</font>: 在version 1.7中，展开式中的注释内容开始于“#”终止在行尾，而非“}”。因此，上例应该写成</p>
<pre>
p "#{ "string" # comment
  }"                          # =&gt; "string"
</pre>

<p>这个样子。</p>
<h2><a name="a.a5.b3.a5.de.a5.f3.a5.c9.bd.d0.ce.cf" id="a.a5.b3.a5.de.a5.f3.a5.c9.bd.d0.ce.cf">命令输出</a><!-- RDLabel: "命令输出" --></h2>
<p>例:</p>
<pre>
`date`
%x{ date }
</pre>

<p>被后引号(<code>`</code>)括起来的字符串与被双引号括起来的字符串是一样的。首先会处理其中的<a href="#a.a5.d0.a5.c3.a5.af.a5.b9.a5.e9.a5.c3.a5.b7.a5.e5.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">反斜线表示法</a>和<a href="#a.bc.b0.c5.b8.b3.ab" title="字面值 (292d)" class="modified-year">展开式</a>，然后才会执行该命令。命令的标准输出是字符串。每次计算命令时都会把它执行一次。若想得到命令的结束status，请参考<font color=blue>$?</font>。</p>
<p>还有其他一些使用<a href="#a.25.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">%表示法</a>的命令输出。</p>
<h2><a name="a.a5.d2.a5.a2.a5.c9.a5.ad.a5.e5.a5.e1.a5.f3.a5.c8.20.28.b9.d4.bb.d8.b8.fe.ca.b8.bb.fa.ce.f3.a5.ea.a5.c6.a5.e9.a5.eb.29" id="a.a5.d2.a5.a2.a5.c9.a5.ad.a5.e5.a5.e1.a5.f3.a5.c8.20.28.b9.d4.bb.d8.b8.fe.ca.b8.bb.fa.ce.f3.a5.ea.a5.c6.a5.e9.a5.eb.29">here document - 集成字符串 (多行字符串的字面值)</a></h2>
<p>语法:</p>
<pre>
&lt;&lt;[-]["'`]标识符["'`]
   ...
标识符
</pre>

<p>普通的<a href="#a.ca.b8.bb.fa.ce.f3.a5.ea.a5.c6.a5.e9.a5.eb" title="字面值 (292d)" class="modified-year">字符串字面值</a>是指使用分隔符(", ', ` 等)括起来的字符串部分。集成字符串是指，把从包含“<<标识符”的行的下一行开始，到只包含“标识符”的行的行首之间的内容封装起来之后得到的多行字符串(的字面值)。例如</p>
<pre>
print &lt;&lt;EOS      # (从这里开始)直到标识符 EOS 之前的部分就是字面值
  the string
  next line
EOS
</pre>

<p>等同于下例</p>
<pre>
print "  the string\n  next line\n"
</pre>

<p>集成字符串中的开始标签“<<标识符”具有非常重要的语法意义。您可以使用开始标签，将集成字符串的内容传递给某参数，或者把集成字符串本身当作被调(receiver)使用。</p>
<pre>
# 在表达式中加入开始标签
# 把集成字符串的内容传递给method的第2个参数
method(arg1, &lt;&lt;LABEL, arg2)
    集成字符串的具体内容
LABEL

# 将集成字符串用作被调
p  &lt;&lt;LABEL.upcase
the lower case string
LABEL

# =&gt; "THE LOWER CASE STRING"
</pre>

<p>开始标签的下一行通常是集成字符串的具体内容。例如，下面的写法是错误的。</p>
<pre>
printf('%s%d',
       &lt;&lt;EOS,
       3055 * 2 / 5)   # &lt;- 该行已经混入集成字符串的内部
This line is a here document.
EOS
</pre>

<p>若把开始标签写成“<<-标识符”的话，表示集成字符串的最后一行将使用缩进格式。除此以外，您不能在最后一行中加入空白或是注释。</p>
<pre>
if need_define_foo
  eval &lt;&lt;-EOS   # 使用'&lt;&lt;-'后 
    def foo
      print "foo\n"
    end
  EOS
  #↑最后一行使用了缩进格式。
end
</pre>

<p>您还可以在同一行中使用多个集成字符串。</p>
<pre>
print &lt;&lt;FIRST, &lt;&lt;SECOND
   这里是第一个集成字符串的内容。
   这里也是。
FIRST
   从该行开始第二个集成字符串的内容。
   第二个集成字符串将在本行后面结束。
SECOND
</pre>

<p>您可以使用引号(""、''或``)将开始标签“<<标识符”中的标识符括起来。这时，集成字符串的性质将取决于您所选择的引号的种类。请参考下列，当您选择双引号时，其效果与不使用任何引号时的效果相同。</p>
<pre>
# 反斜线表示法和展开式都是有效的
print &lt;&lt;"EOS"
The price is #{$price}.
EOS

# 效果同上
print &lt;&lt;EOS
The price is #{$price}.
EOS

# 展开式无法工作
print &lt;&lt;'EOS'
The price is #{$price}.
EOS

# 执行命令
print &lt;&lt;`EOC`
date
diff test.c.org test.c
EOC
</pre>

<p>请参考
<a href="#a.ca.b8.bb.fa.ce.f3.a5.ea.a5.c6.a5.e9.a5.eb" title="字面值 (292d)" class="modified-year">字符串字面值</a>、
<a href="#a.bc.b0.c5.b8.b3.ab" title="字面值 (292d)" class="modified-year">展开式</a>、
<a href="#a.a5.d0.a5.c3.a5.af.a5.b9.a5.e9.a5.c3.a5.b7.a5.e5.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">反斜线表示法</a>、
<a href="#a.a5.b3.a5.de.a5.f3.a5.c9.bd.d0.ce.cf" title="字面值 (292d)" class="modified-year">命令输出</a>
来了解字符串字面值的性质</p>
<h2><a name="a.c0.b5.b5.ac.c9.bd.b8.bd.a5.ea.a5.c6.a5.e9.a5.eb" id="a.c0.b5.b5.ac.c9.bd.b8.bd.a5.ea.a5.c6.a5.e9.a5.eb">正则表达式字面值</a><!-- RDLabel: "正则表达式字面值" --></h2>
<p>例:</p>
<pre>
/^Ruby the OOPL/
/Ruby/i
/my name is #{myname}/o
%r|Ruby|
</pre>

<p>被/括起来的部分就是正则表达式。关于正则表达式中元字符的用法问题，请参考<font color=blue>正则表达式</font>。</p>
<p>尾部/后面的字符是正则表达式中使用的选项。具体内容如下。</p>
<dl>
<dt><a name="i" id="i"><code>i</code></a><!-- RDLabel: "i" --></dt>
<dd>
<p>匹配时不区分字母大小写</p>
</dd>
<dt><a name="o" id="o"><code>o</code></a><!-- RDLabel: "o" --></dt>
<dd>
<p>开始计算正则表达式时只处理一次<a href="#a.bc.b0.c5.b8.b3.ab" title="字面值 (292d)" class="modified-year">展开式</a></p>
</dd>
<dt><a name="x" id="x"><code>x</code></a><!-- RDLabel: "x" --></dt>
<dd>
<p>正则表达式中的空白(包括换行)将被忽视。同时，从"#"到行尾的部分将被当作注释处理(请注意，若注释中包含／则会引起语法解析错误)。</p>
<pre>
/foo        # 注释
 bar/x
</pre>

<p>等同于 <code>/foobar/</code>。</p>
<p>若想包含空白，可以像\一样使用转义。</p>
</dd>
<dt><a name="m" id="m"><code>m</code></a><!-- RDLabel: "m" --></dt>
<dd>
<p>多行模式。正则表达式 "."将会匹配换行。</p>
</dd>
</dl>
<p>因为Ruby的日语化做得比较好，您可以设定<font color=blue>$KCODE</font>使其能够正确处理日语字符。若$KCODE =“n”时，Ruby将不会识别任何日语字符，而把它们当作字节串处理，这是默认状态。</p>
<p>您还可以摆脱<font color=blue>$KCODE</font>的束缚，分别为每个正则表达式指定<code>n</code>, <code>e</code>, <code>s</code>, <code>u</code>中的任意一个选项来确定该正则表达式的字符代码。</p>
<p>您还可以使用<a href="#a.25.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">%表示法</a>来指定其他形式的正则表达式。</p>
<p>在正则表达式中，<a href="#a.a5.d0.a5.c3.a5.af.a5.b9.a5.e9.a5.c3.a5.b7.a5.e5.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">反斜线表示法</a>和
<a href="#a.bc.b0.c5.b8.b3.ab" title="字面值 (292d)" class="modified-year">展开式</a>也是有效的。</p>
<p>若正则表达式字面值中不含<a href="#a.bc.b0.c5.b8.b3.ab" title="字面值 (292d)" class="modified-year">展开式</a>的话，则对其进行计算时始终返回同一个正则表达式对象。若含有<a href="#a.bc.b0.c5.b8.b3.ab" title="字面值 (292d)" class="modified-year">展开式</a>的话，则每次(以展开式的结果为基础)进行计算时都会编译正则表达式并生成正则表达式对象(但是，若指定了上述的o选项的话，则返回同一个正则表达式对象)。</p>
<h2><a name="a.c7.db.ce.f3.bc.b0" id="a.c7.db.ce.f3.bc.b0">数组表达式</a><!-- RDLabel: "数组表达式" --></h2>
<p>例:</p>
<pre>
[1, 2, 3]
%w(a b c)
%W(a b c)             ((&lt;ruby 1.7 特性&gt;))
</pre>

<p>语法:</p>
<pre>
`[' 表达式`,' ... `]'
</pre>

<p>分别计算每个表达式的值，然后返回由这些值构成的数组。数组是<font color=blue>Array</font>类的实例。</p>
<p>当数组元素都是字符串字面值时，可以使用<a href="#a.25.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">%表示法</a>将数组写成其他形式。</p>
<p>每次对数组表达式进行计算时都会返回一个新的数组对象。</p>
<h2><a name="a.a5.cf.a5.c3.a5.b7.a5.e5.bc.b0" id="a.a5.cf.a5.c3.a5.b7.a5.e5.bc.b0">哈希表表达式</a><!-- RDLabel: "哈希表表达式" --></h2>
<p>例:</p>
<pre>
{1=&gt;2, 2=&gt;4, 3=&gt;6}
</pre>

<p>语法:</p>
<pre>
`{' 表达式 `=&gt;' 表达式 `,' ... `}'
`{' 表达式 `,' 表达式 `,' ... `}'
</pre>

<p>分别计算每个表达式的值，然后返回由索引和值构成的哈希表对象。所谓哈希表是指将任意对象当作索引而构成的数组，它是<font color=blue>Hash</font>类的实例。</p>
<p>当向某方法的参数尾部传递哈希表，且该哈希表中的元素超过1个时，可以省略{,}。但是，在形如obj[...]的方法调用以及<a href="#a.c7.db.ce.f3.bc.b0" title="字面值 (292d)" class="modified-year">数组表达式</a>中，当所有元素都是哈希表时，才可以省略{,}。</p>
<p>例:</p>
<pre>
method(1,2,3=&gt;4)      # method(1,2,{3=&gt;4})
obj[1=&gt;2,3=&gt;4]        # obj[{1=&gt;2,3=&gt;4}]
[1=&gt;2,3=&gt;4]           # [{1=&gt;2, 3=&gt;4}]
</pre>

<p>每次对哈希表表达式进行计算时都会生成一个新的哈希表对象。</p>
<h2><a name="a.c8.cf.b0.cf.a5.aa.a5.d6.a5.b8.a5.a7.a5.af.a5.c8" id="a.c8.cf.b0.cf.a5.aa.a5.d6.a5.b8.a5.a7.a5.af.a5.c8">范围对象</a><!-- RDLabel: "范围对象" --></h2>
<p>请参考<font color=blue>范围表达式</font></p>
<p>若范围表达式两端都是数值字面值时，每次计算都将返回同一个对象。除此以外，每次计算时都会返回新的范围对象。</p>
<h2><a name="a.a5.b7.a5.f3.a5.dc.a5.eb" id="a.a5.b7.a5.f3.a5.dc.a5.eb">符号</a><!-- RDLabel: "符号" --></h2>
<p>例:</p>
<pre>
(符号的例子)

      :class
      :lvar
      :method!
      :andthisis?
      :$gvar
      :@ivar
      :@@cvar
      :+
</pre>

<p>语法:</p>
<pre>
`:' 标识符
`:' 变量名
`:' 操作符
</pre>

<p><font color=blue>Symbol</font>类的实例。字符串与<code>Symbol</code>对象是一一对应的。</p>
<p>指定给Symbol字面值的操作符，必须是那些可以作为方法进行再定义的操作符。请参考<font color=blue>操作符表达式</font>。</p>
<p><font color=blue>ruby 1.7 特性</font>:
在1.7中，也可以这样</p>
<pre>
p :'foo-bar' #=&gt; :"foo-bar"
p :"foo-bar" #=&gt; :"foo-bar"
p %s{foo-bar} #=&gt; :"foo-bar"
</pre>

<p>在这种表示法中，可以定义任意的符号(但不能包含“\0”)。</p>
<p>在<code>:"..."</code> 中，<a href="#a.a5.d0.a5.c3.a5.af.a5.b9.a5.e9.a5.c3.a5.b7.a5.e5.b5.ad.cb.a1" title="字面值 (292d)" class="modified-year">反斜线表示法</a>和
<a href="#a.bc.b0.c5.b8.b3.ab" title="字面值 (292d)" class="modified-year">展开式</a>都是有效的。</p>
<p>通常符号是一种很专一的对象，计算时(就算包含展开式也好，只要其结果是同一字符串的话)总是返回同一对象。</p>
<h2><a name="a.25.b5.ad.cb.a1" id="a.25.b5.ad.cb.a1">%表示法</a><!-- RDLabel: "%表示法" --></h2>
<p>在<a href="#a.ca.b8.bb.fa.ce.f3.a5.ea.a5.c6.a5.e9.a5.eb" title="字面值 (292d)" class="modified-year">字符串字面值</a>、
<a href="#a.a5.b3.a5.de.a5.f3.a5.c9.bd.d0.ce.cf" title="字面值 (292d)" class="modified-year">命令输出</a>、
<a href="#a.c0.b5.b5.ac.c9.bd.b8.bd.a5.ea.a5.c6.a5.e9.a5.eb" title="字面值 (292d)" class="modified-year">正则表达式字面值</a>、
<a href="#a.c7.db.ce.f3.bc.b0" title="字面值 (292d)" class="modified-year">数组表达式</a>、
<a href="#a.a5.b7.a5.f3.a5.dc.a5.eb" title="字面值 (292d)" class="modified-year">符号</a>
中，可以使用这种以％开头的表达法。特别是当字符串或正则表达式中包含双引号(")、斜线(/)等(切分字面值时使用的字符)要素时，它可以减少反斜线(\)在代码中出现的次数。另外，它还可以方便地表示字符串数组。详细内容如下。</p>
<ul>
<li><code>%!STRING!</code>  : 双引号中的字符串</li>
<li><code>%Q!STRING!</code> : 同上</li>
<li><code>%q!STRING!</code> : 单引号中的字符串</li>
<li><code>%x!STRING!</code> : 命令输出</li>
<li><code>%r!STRING!</code> : 正则表达式</li>
<li><code>%w!STRING!</code> : 字符串数组(以空白字符切分各元素)</li>
<li><code>%W!STRING!</code> : 字符串数组(以空白字符切分各元素)。展开式、反斜线表示法都有效(<font color=blue>ruby 1.7 特性</font>)</li>
<li><code>%s!STRING!</code> : 符号。展开式、反斜线表示法都无效(<font color=blue>ruby 1.7 特性</font>)</li>
</ul>
<p><code>!</code>部分可以使用任何非字母非数字的字符，包括换行。若起始切分字符是括号("(","[","{","<")的话，则终止切分字符就是与其对应的括号。若以括号作为切分字符的话，只要对应部分使用了对应的括号，就可以在其中的元素中使用与切分字符一样的括号。</p>
<pre>
%(()) =&gt; "()"
</pre>

<p>若在数组表达式中使用%表示法的话，相当于使用空白字符将数组中以单引号括起来的字符串元素分隔开来。例如，</p>
<pre>
%w(foo bar baz)
</pre>

<p>与<code>['foo', 'bar', 'baz']</code>是一样。</p>
<p>还可以使用反斜线将空白字符纳入数组元素。</p>
<pre>
%w(foo\ bar baz)

=&gt; ["foo bar", "baz"]
</pre>

<p><font color=blue>ruby 1.7 特性</font>:%W与%w相同，就如同双引号中的字符串一样，可以使用展开式和反斜线表示法。但使用空白字符进行切分的过程要早于展开式的计算过程。</p>
<pre>
v = "c d"
%W(a\ b #{v}e\sf #{})

=&gt; ["a b", "c de f", ""]
</pre>
<hr />
</div>
<div class="footer">
Originally Written by webmaster@ruby-lang.org<br>
Translated by <a href="http://cn.ce-lab.net/">Community Engine China</a> (<a href="mailto:rubycn@ce-lab.net">Mail</a>)<br>
Last update on 2004-12-22
</div>
</body>
</html>


